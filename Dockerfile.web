# Next.js (React) frontend for CallStudio
FROM node:20-alpine

WORKDIR /app

# Install dependencies
COPY web/package*.json ./
# Copy scripts directory for postinstall script
COPY web/scripts ./scripts
# Create public directory structure
RUN mkdir -p public/fonts
RUN npm install

# Next.js dev server will run on port 3001 inside the container
EXPOSE 3001

# Bind to 0.0.0.0 so Docker can expose it on 3001
# Source code will be mounted via volume in docker-compose
CMD ["npm", "run", "dev", "--", "-H", "0.0.0.0", "-p", "3001"]

